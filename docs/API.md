<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# yanzi

```go
import "github.com/chuxorg/chux-yanzi-cli/cmd/yanzi"
```

## Index



# client

```go
import "github.com/chuxorg/chux-yanzi-cli/internal/client"
```

## Index

- [type ChainResponse](<#ChainResponse>)
- [type Client](<#Client>)
  - [func New\(baseURL string\) \*Client](<#New>)
  - [func \(c \*Client\) ChainIntent\(ctx context.Context, id string\) \(ChainResponse, error\)](<#Client.ChainIntent>)
  - [func \(c \*Client\) CreateIntent\(ctx context.Context, req CreateIntentRequest\) \(IntentRecord, error\)](<#Client.CreateIntent>)
  - [func \(c \*Client\) GetIntent\(ctx context.Context, id string\) \(IntentRecord, error\)](<#Client.GetIntent>)
  - [func \(c \*Client\) ListIntents\(ctx context.Context, author, source string, limit int, metaFilters map\[string\]string\) \(ListResponse, error\)](<#Client.ListIntents>)
  - [func \(c \*Client\) VerifyIntent\(ctx context.Context, id string\) \(VerifyResponse, error\)](<#Client.VerifyIntent>)
- [type CreateIntentRequest](<#CreateIntentRequest>)
- [type IntentRecord](<#IntentRecord>)
- [type ListResponse](<#ListResponse>)
- [type VerifyResponse](<#VerifyResponse>)


<a name="ChainResponse"></a>
## type [ChainResponse](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/client/client.go#L37-L42>)

ChainResponse is returned by the /chain endpoint.

```go
type ChainResponse struct {
    HeadID       string         `json:"head_id"`
    Length       int            `json:"length"`
    Intents      []IntentRecord `json:"intents"`
    MissingLinks []string       `json:"missing_links,omitempty"`
}
```

<a name="Client"></a>
## type [Client](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/client/client.go#L18-L21>)

Client is a minimal HTTP client for the Yanzi Library API.

```go
type Client struct {
    BaseURL    string
    HTTPClient *http.Client
}
```

<a name="New"></a>
### func [New](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/client/client.go#L61>)

```go
func New(baseURL string) *Client
```

New creates a client using the provided base URL.

<a name="Client.ChainIntent"></a>
### func \(\*Client\) [ChainIntent](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/client/client.go#L90>)

```go
func (c *Client) ChainIntent(ctx context.Context, id string) (ChainResponse, error)
```

ChainIntent calls GET /v0/intents/\{id\}/chain.

<a name="Client.CreateIntent"></a>
### func \(\*Client\) [CreateIntent](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/client/client.go#L71>)

```go
func (c *Client) CreateIntent(ctx context.Context, req CreateIntentRequest) (IntentRecord, error)
```

CreateIntent posts a new intent record.

<a name="Client.GetIntent"></a>
### func \(\*Client\) [GetIntent](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/client/client.go#L126>)

```go
func (c *Client) GetIntent(ctx context.Context, id string) (IntentRecord, error)
```

GetIntent calls GET /v0/intents/\{id\}.

<a name="Client.ListIntents"></a>
### func \(\*Client\) [ListIntents](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/client/client.go#L100>)

```go
func (c *Client) ListIntents(ctx context.Context, author, source string, limit int, metaFilters map[string]string) (ListResponse, error)
```

ListIntents calls GET /v0/intents.

<a name="Client.VerifyIntent"></a>
### func \(\*Client\) [VerifyIntent](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/client/client.go#L80>)

```go
func (c *Client) VerifyIntent(ctx context.Context, id string) (VerifyResponse, error)
```

VerifyIntent calls GET /v0/intents/\{id\}/verify.

<a name="CreateIntentRequest"></a>
## type [CreateIntentRequest](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/client/client.go#L50-L58>)

CreateIntentRequest is the payload for POST /v0/intents.

```go
type CreateIntentRequest struct {
    Author     string          `json:"author"`
    SourceType string          `json:"source_type"`
    Title      string          `json:"title,omitempty"`
    Prompt     string          `json:"prompt"`
    Response   string          `json:"response"`
    Meta       json.RawMessage `json:"meta,omitempty"`
    PrevHash   string          `json:"prev_hash,omitempty"`
}
```

<a name="IntentRecord"></a>
## type [IntentRecord](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/client/client.go#L24>)

IntentRecord mirrors the server v0 schema.

```go
type IntentRecord = model.IntentRecord
```

<a name="ListResponse"></a>
## type [ListResponse](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/client/client.go#L45-L47>)

ListResponse is returned by the /intents endpoint.

```go
type ListResponse struct {
    Intents []IntentRecord `json:"intents"`
}
```

<a name="VerifyResponse"></a>
## type [VerifyResponse](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/client/client.go#L27-L34>)

VerifyResponse is returned by the /verify endpoint.

```go
type VerifyResponse struct {
    ID           string  `json:"id"`
    Valid        bool    `json:"valid"`
    StoredHash   string  `json:"stored_hash"`
    ComputedHash string  `json:"computed_hash"`
    PrevHash     string  `json:"prev_hash"`
    Error        *string `json:"error"`
}
```

# cmd

```go
import "github.com/chuxorg/chux-yanzi-cli/internal/cmd"
```

## Index

- [func RunCapture\(args \[\]string\) error](<#RunCapture>)
- [func RunChain\(args \[\]string\) error](<#RunChain>)
- [func RunCheckpoint\(args \[\]string\) error](<#RunCheckpoint>)
- [func RunList\(args \[\]string\) error](<#RunList>)
- [func RunMode\(args \[\]string\) error](<#RunMode>)
- [func RunProject\(args \[\]string\) error](<#RunProject>)
- [func RunRehydrate\(args \[\]string\) error](<#RunRehydrate>)
- [func RunShow\(args \[\]string\) error](<#RunShow>)
- [func RunVerify\(args \[\]string\) error](<#RunVerify>)


<a name="RunCapture"></a>
## func [RunCapture](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/cmd/capture.go#L21>)

```go
func RunCapture(args []string) error
```

RunCapture posts a new intent record to the library API.

<a name="RunChain"></a>
## func [RunChain](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/cmd/chain.go#L15>)

```go
func RunChain(args []string) error
```

RunChain prints the intent chain from oldest to newest.

<a name="RunCheckpoint"></a>
## func [RunCheckpoint](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/cmd/checkpoint.go#L15>)

```go
func RunCheckpoint(args []string) error
```

RunCheckpoint handles checkpoint subcommands.

<a name="RunList"></a>
## func [RunList](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/cmd/list.go#L15>)

```go
func RunList(args []string) error
```

RunList lists intent records.

<a name="RunMode"></a>
## func [RunMode](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/cmd/mode.go#L12>)

```go
func RunMode(args []string) error
```

RunMode shows or sets the runtime mode.

<a name="RunProject"></a>
## func [RunProject](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/cmd/project.go#L20>)

```go
func RunProject(args []string) error
```

RunProject handles project subcommands.

<a name="RunRehydrate"></a>
## func [RunRehydrate](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/cmd/rehydrate.go#L15>)

```go
func RunRehydrate(args []string) error
```

RunRehydrate renders the latest checkpoint and artifacts since.

<a name="RunShow"></a>
## func [RunShow](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/cmd/show.go#L15>)

```go
func RunShow(args []string) error
```

RunShow prints full intent details by id.

<a name="RunVerify"></a>
## func [RunVerify](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/cmd/verify.go#L15>)

```go
func RunVerify(args []string) error
```

RunVerify verifies the stored hash for a given intent id.

# config

```go
import "github.com/chuxorg/chux-yanzi-cli/internal/config"
```

## Index

- [func ConfigPath\(\) \(string, error\)](<#ConfigPath>)
- [func DefaultDBPath\(\) \(string, error\)](<#DefaultDBPath>)
- [func StateDir\(\) \(string, error\)](<#StateDir>)
- [type Config](<#Config>)
  - [func Load\(\) \(Config, error\)](<#Load>)
- [type Mode](<#Mode>)


<a name="ConfigPath"></a>
## func [ConfigPath](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/config/config.go#L97>)

```go
func ConfigPath() (string, error)
```

ConfigPath returns the full path to \~/.yanzi/config.yaml.

<a name="DefaultDBPath"></a>
## func [DefaultDBPath](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/config/config.go#L115>)

```go
func DefaultDBPath() (string, error)
```

DefaultDBPath returns the default SQLite path under \~/.yanzi.

<a name="StateDir"></a>
## func [StateDir](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/config/config.go#L106>)

```go
func StateDir() (string, error)
```

StateDir returns the \~/.yanzi directory path.

<a name="Config"></a>
## type [Config](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/config/config.go#L24-L28>)

Config holds CLI configuration values loaded from disk.

```go
type Config struct {
    Mode    Mode   `yaml:"mode"`
    DBPath  string `yaml:"db_path"`
    BaseURL string `yaml:"base_url"`
}
```

<a name="Load"></a>
### func [Load](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/config/config.go#L31>)

```go
func Load() (Config, error)
```

Load reads \~/.yanzi/config.yaml and returns defaults if missing.

<a name="Mode"></a>
## type [Mode](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/config/config.go#L16>)

Mode controls whether yanzi runs against local storage or HTTP APIs.

```go
type Mode string
```

<a name="ModeLocal"></a>

```go
const (
    ModeLocal Mode = "local"
    ModeHTTP  Mode = "http"
)
```

# yanzilibrary

```go
import "github.com/chuxorg/chux-yanzi-cli/internal/library"
```

## Index

- [Variables](<#variables>)
- [func HashCheckpoint\(checkpoint Checkpoint\) \(string, error\)](<#HashCheckpoint>)
- [func InitDB\(\) \(\*sql.DB, error\)](<#InitDB>)
- [func MigrationsFS\(\) fs.FS](<#MigrationsFS>)
- [func ResolvedDBPath\(\) string](<#ResolvedDBPath>)
- [type Checkpoint](<#Checkpoint>)
  - [func CreateCheckpoint\(ctx context.Context, db \*sql.DB, project, summary string, artifactIDs \[\]string\) \(Checkpoint, error\)](<#CreateCheckpoint>)
  - [func ListCheckpoints\(ctx context.Context, db \*sql.DB, project string\) \(\[\]Checkpoint, error\)](<#ListCheckpoints>)
  - [func \(c Checkpoint\) Normalize\(\) Checkpoint](<#Checkpoint.Normalize>)
  - [func \(c Checkpoint\) Validate\(\) error](<#Checkpoint.Validate>)
- [type CheckpointStore](<#CheckpointStore>)
  - [func NewCheckpointStore\(db \*sql.DB\) \*CheckpointStore](<#NewCheckpointStore>)
  - [func \(s \*CheckpointStore\) CreateCheckpoint\(ctx context.Context, project, summary string, artifactIDs \[\]string\) \(Checkpoint, error\)](<#CheckpointStore.CreateCheckpoint>)
  - [func \(s \*CheckpointStore\) ListCheckpoints\(ctx context.Context, project string\) \(\[\]Checkpoint, error\)](<#CheckpointStore.ListCheckpoints>)
- [type CheckpointValidationError](<#CheckpointValidationError>)
  - [func \(e CheckpointValidationError\) Error\(\) string](<#CheckpointValidationError.Error>)
- [type Intent](<#Intent>)
- [type Project](<#Project>)
  - [func CreateProject\(name string, description string\) \(\*Project, error\)](<#CreateProject>)
  - [func ListProjects\(\) \(\[\]Project, error\)](<#ListProjects>)
- [type ProjectNotFoundError](<#ProjectNotFoundError>)
  - [func \(e ProjectNotFoundError\) Error\(\) string](<#ProjectNotFoundError.Error>)
- [type RehydratePayload](<#RehydratePayload>)
  - [func RehydrateProject\(project string\) \(\*RehydratePayload, error\)](<#RehydrateProject>)


## Variables

<a name="ErrCheckpointNotFound"></a>ErrCheckpointNotFound indicates that no checkpoint exists for the requested project.

```go
var ErrCheckpointNotFound = errors.New("checkpoint not found")
```

<a name="HashCheckpoint"></a>
## func [HashCheckpoint](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/checkpoint_hash.go#L14>)

```go
func HashCheckpoint(checkpoint Checkpoint) (string, error)
```

HashCheckpoint computes a deterministic SHA\-256 hash for a Checkpoint. The hash preimage excludes the hash field and uses canonical field order.

<a name="InitDB"></a>
## func [InitDB](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/db_init.go#L31>)

```go
func InitDB() (*sql.DB, error)
```

InitDB resolves the database path, ensures migrations, and returns a SQLite handle.

<a name="MigrationsFS"></a>
## func [MigrationsFS](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/migrations_embed.go#L12>)

```go
func MigrationsFS() fs.FS
```

MigrationsFS exposes embedded migration files for libraryd.

<a name="ResolvedDBPath"></a>
## func [ResolvedDBPath](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/db_init.go#L69>)

```go
func ResolvedDBPath() string
```

ResolvedDBPath returns the most recently resolved database path.

<a name="Checkpoint"></a>
## type [Checkpoint](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/checkpoint.go#L9-L16>)

Checkpoint represents an immutable checkpoint artifact.

```go
type Checkpoint struct {
    Project              string   `json:"project"`
    Summary              string   `json:"summary"`
    CreatedAt            string   `json:"created_at"`
    ArtifactIDs          []string `json:"artifact_ids"`
    PreviousCheckpointID string   `json:"previous_checkpoint_id,omitempty"`
    Hash                 string   `json:"hash"`
}
```

<a name="CreateCheckpoint"></a>
### func [CreateCheckpoint](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/checkpoint_store.go#L155>)

```go
func CreateCheckpoint(ctx context.Context, db *sql.DB, project, summary string, artifactIDs []string) (Checkpoint, error)
```

CreateCheckpoint is a convenience wrapper for CheckpointStore.CreateCheckpoint.

<a name="ListCheckpoints"></a>
### func [ListCheckpoints](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/checkpoint_store.go#L160>)

```go
func ListCheckpoints(ctx context.Context, db *sql.DB, project string) ([]Checkpoint, error)
```

ListCheckpoints is a convenience wrapper for CheckpointStore.ListCheckpoints.

<a name="Checkpoint.Normalize"></a>
### func \(Checkpoint\) [Normalize](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/checkpoint.go#L60>)

```go
func (c Checkpoint) Normalize() Checkpoint
```

Normalize returns a copy with normalized fields for deterministic hashing/storage.

<a name="Checkpoint.Validate"></a>
### func \(Checkpoint\) [Validate](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/checkpoint.go#L40>)

```go
func (c Checkpoint) Validate() error
```

Validate checks required fields for a checkpoint record.

<a name="CheckpointStore"></a>
## type [CheckpointStore](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/checkpoint_store.go#L13-L15>)

CheckpointStore provides persistence for checkpoints.

```go
type CheckpointStore struct {
    // contains filtered or unexported fields
}
```

<a name="NewCheckpointStore"></a>
### func [NewCheckpointStore](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/checkpoint_store.go#L18>)

```go
func NewCheckpointStore(db *sql.DB) *CheckpointStore
```

NewCheckpointStore constructs a CheckpointStore using the provided database handle.

<a name="CheckpointStore.CreateCheckpoint"></a>
### func \(\*CheckpointStore\) [CreateCheckpoint](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/checkpoint_store.go#L23>)

```go
func (s *CheckpointStore) CreateCheckpoint(ctx context.Context, project, summary string, artifactIDs []string) (Checkpoint, error)
```

CreateCheckpoint creates a new checkpoint artifact for a project.

<a name="CheckpointStore.ListCheckpoints"></a>
### func \(\*CheckpointStore\) [ListCheckpoints](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/checkpoint_store.go#L99>)

```go
func (s *CheckpointStore) ListCheckpoints(ctx context.Context, project string) ([]Checkpoint, error)
```

ListCheckpoints returns checkpoints for a project ordered by creation time, newest first.

<a name="CheckpointValidationError"></a>
## type [CheckpointValidationError](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/checkpoint.go#L19-L22>)

CheckpointValidationError reports invalid checkpoint input.

```go
type CheckpointValidationError struct {
    Field   string
    Message string
}
```

<a name="CheckpointValidationError.Error"></a>
### func \(CheckpointValidationError\) [Error](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/checkpoint.go#L25>)

```go
func (e CheckpointValidationError) Error() string
```

Error returns the validation error as "\<field\> \<message\>".

<a name="Intent"></a>
## type [Intent](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/rehydrate.go#L17-L28>)

Intent represents an intent artifact loaded from the intents table for rehydration.

```go
type Intent struct {
    ID         string
    CreatedAt  time.Time
    Author     string
    SourceType string
    Title      string
    Prompt     string
    Response   string
    Meta       json.RawMessage
    PrevHash   string
    Hash       string
}
```

<a name="Project"></a>
## type [Project](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/project.go#L6-L10>)

Project represents a named project namespace in the library ledger.

```go
type Project struct {
    Name        string
    Description string
    CreatedAt   time.Time
}
```

<a name="CreateProject"></a>
### func [CreateProject](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/project_store.go#L15>)

```go
func CreateProject(name string, description string) (*Project, error)
```

CreateProject creates a unique project record and returns the created project.

<a name="ListProjects"></a>
### func [ListProjects](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/project_store.go#L65>)

```go
func ListProjects() ([]Project, error)
```

ListProjects returns all projects ordered by creation time, oldest first.

<a name="ProjectNotFoundError"></a>
## type [ProjectNotFoundError](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/checkpoint.go#L30-L32>)

ProjectNotFoundError indicates the referenced project was not found.

```go
type ProjectNotFoundError struct {
    Name string
}
```

<a name="ProjectNotFoundError.Error"></a>
### func \(ProjectNotFoundError\) [Error](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/checkpoint.go#L35>)

```go
func (e ProjectNotFoundError) Error() string
```

Error returns the project\-not\-found message including the project name.

<a name="RehydratePayload"></a>
## type [RehydratePayload](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/rehydrate.go#L31-L35>)

RehydratePayload contains the latest checkpoint and the intents created after it.

```go
type RehydratePayload struct {
    Project          string
    LatestCheckpoint Checkpoint
    IntentsSince     []Intent
}
```

<a name="RehydrateProject"></a>
### func [RehydrateProject](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/library/rehydrate.go#L38>)

```go
func RehydrateProject(project string) (*RehydratePayload, error)
```

RehydrateProject loads the latest checkpoint and subsequent intents for a project.

# hash

```go
import "github.com/chuxorg/chux-yanzi-cli/internal/core/hash"
```

Package hash provides deterministic intent hashing logic.

## Index

- [func CanonicalizeMeta\(raw json.RawMessage\) \(json.RawMessage, error\)](<#CanonicalizeMeta>)
- [func HashIntent\(record model.IntentRecord\) \(string, error\)](<#HashIntent>)


<a name="CanonicalizeMeta"></a>
## func [CanonicalizeMeta](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/core/hash/hash.go#L20>)

```go
func CanonicalizeMeta(raw json.RawMessage) (json.RawMessage, error)
```

CanonicalizeMeta re\-encodes a JSON object with sorted keys.

<a name="HashIntent"></a>
## func [HashIntent](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/core/hash/hash.go#L43>)

```go
func HashIntent(record model.IntentRecord) (string, error)
```

HashIntent computes a deterministic SHA\-256 hash for an IntentRecord. The hash preimage excludes the hash field and uses canonical field order.

# model

```go
import "github.com/chuxorg/chux-yanzi-cli/internal/core/model"
```

Package model provides shared data model types.

## Index

- [type IntentRecord](<#IntentRecord>)
  - [func \(r IntentRecord\) Normalize\(\) IntentRecord](<#IntentRecord.Normalize>)
  - [func \(r IntentRecord\) Validate\(\) error](<#IntentRecord.Validate>)


<a name="IntentRecord"></a>
## type [IntentRecord](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/core/model/intent.go#L12-L23>)

IntentRecord represents the v0 intent schema persisted and shared across services.

```go
type IntentRecord struct {
    ID         string          `json:"id"`
    CreatedAt  string          `json:"created_at"`
    Author     string          `json:"author"`
    SourceType string          `json:"source_type"`
    Title      string          `json:"title,omitempty"`
    Prompt     string          `json:"prompt"`
    Response   string          `json:"response"`
    Meta       json.RawMessage `json:"meta,omitempty"`
    PrevHash   string          `json:"prev_hash,omitempty"`
    Hash       string          `json:"hash"`
}
```

<a name="IntentRecord.Normalize"></a>
### func \(IntentRecord\) [Normalize](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/core/model/intent.go#L55>)

```go
func (r IntentRecord) Normalize() IntentRecord
```

Normalize returns a copy with normalized fields for deterministic hashing/storage.

<a name="IntentRecord.Validate"></a>
### func \(IntentRecord\) [Validate](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/core/model/intent.go#L26>)

```go
func (r IntentRecord) Validate() error
```

Validate checks required fields for the v0 schema.

# store

```go
import "github.com/chuxorg/chux-yanzi-cli/internal/core/store"
```

Package store provides a SQLite persistence layer.

## Index

- [func FilterIntentsByMeta\(intents \[\]model.IntentRecord, filters map\[string\]string\) \(\[\]model.IntentRecord, error\)](<#FilterIntentsByMeta>)
- [type Store](<#Store>)
  - [func Open\(path string\) \(\*Store, error\)](<#Open>)
  - [func \(s \*Store\) Close\(\) error](<#Store.Close>)
  - [func \(s \*Store\) CreateIntent\(ctx context.Context, record model.IntentRecord\) error](<#Store.CreateIntent>)
  - [func \(s \*Store\) GetIntent\(ctx context.Context, id string\) \(model.IntentRecord, error\)](<#Store.GetIntent>)
  - [func \(s \*Store\) GetIntentByHash\(ctx context.Context, hash string\) \(model.IntentRecord, error\)](<#Store.GetIntentByHash>)
  - [func \(s \*Store\) ListIntents\(ctx context.Context, limit int\) \(\[\]model.IntentRecord, error\)](<#Store.ListIntents>)
  - [func \(s \*Store\) Migrate\(ctx context.Context\) error](<#Store.Migrate>)


<a name="FilterIntentsByMeta"></a>
## func [FilterIntentsByMeta](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/core/store/meta_filter.go#L11>)

```go
func FilterIntentsByMeta(intents []model.IntentRecord, filters map[string]string) ([]model.IntentRecord, error)
```

FilterIntentsByMeta returns intents that match all meta filters \(AND semantics\).

<a name="Store"></a>
## type [Store](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/core/store/sqlite.go#L27-L29>)

Store provides CRUD and migration operations for intent persistence.

```go
type Store struct {
    // contains filtered or unexported fields
}
```

<a name="Open"></a>
### func [Open](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/core/store/sqlite.go#L32>)

```go
func Open(path string) (*Store, error)
```

Open creates a SQLite\-backed Store with required runtime pragmas enabled.

<a name="Store.Close"></a>
### func \(\*Store\) [Close](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/core/store/sqlite.go#L63>)

```go
func (s *Store) Close() error
```



<a name="Store.CreateIntent"></a>
### func \(\*Store\) [CreateIntent](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/core/store/sqlite.go#L151>)

```go
func (s *Store) CreateIntent(ctx context.Context, record model.IntentRecord) error
```



<a name="Store.GetIntent"></a>
### func \(\*Store\) [GetIntent](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/core/store/sqlite.go#L183>)

```go
func (s *Store) GetIntent(ctx context.Context, id string) (model.IntentRecord, error)
```



<a name="Store.GetIntentByHash"></a>
### func \(\*Store\) [GetIntentByHash](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/core/store/sqlite.go#L217>)

```go
func (s *Store) GetIntentByHash(ctx context.Context, hash string) (model.IntentRecord, error)
```

GetIntentByHash loads an intent by its hash for chain traversal.

<a name="Store.ListIntents"></a>
### func \(\*Store\) [ListIntents](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/core/store/sqlite.go#L250>)

```go
func (s *Store) ListIntents(ctx context.Context, limit int) ([]model.IntentRecord, error)
```



<a name="Store.Migrate"></a>
### func \(\*Store\) [Migrate](<https://github.com/chuxorg/chux-yanzi-cli/blob/master/internal/core/store/sqlite.go#L70>)

```go
func (s *Store) Migrate(ctx context.Context) error
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
